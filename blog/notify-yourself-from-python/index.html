<!DOCTYPE html>
<html lang="en">
  <head prefix="og: https://ogp.me/ns# profile: https://ogp.me/ns/profile# article: https://ogp.me/ns/article#">
      <meta charset="utf-8">
    <link rel="canonical" href="https://honzajavorek.cz/blog/notify-yourself-from-python/">
    <title>Notify yourself from Python &mdash; Javorové lístky</title>

    <meta property="og:title" content="Notify yourself from Python &mdash; Javorové lístky">
    <meta property="og:url" content="https://honzajavorek.cz/blog/notify-yourself-from-python/">

    <link href="https://mastodonczech.cz/@honzajavorek" rel="me">

    <meta property="og:image" content="https://honzajavorek.cz/images/luis-perdigao-JMabq3k4gk8-unsplash.jpg">
    <meta property="og:image:width" content="1024">
    <meta property="og:image:height" content="683">
    <meta name="twitter:image" content="https://honzajavorek.cz/images/luis-perdigao-JMabq3k4gk8-unsplash.jpg">
    <meta name="twitter:card" content="summary_large_image">

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="theme-color" content="#457E31">
    <link rel="icon" href="https://honzajavorek.cz/favicon.ico" sizes="any">
    <link rel="icon" href="https://honzajavorek.cz/favicon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="https://honzajavorek.cz/apple-touch-icon.png">
    <link rel="manifest" href="https://honzajavorek.cz/site.webmanifest">

    <link rel="stylesheet" href="https://honzajavorek.cz/theme/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://honzajavorek.cz/theme/bootstrap-icons/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://honzajavorek.cz/theme/main.css">


  <link rel="stylesheet" href="https://honzajavorek.cz/theme/code.css">

    <link href="https://honzajavorek.cz/feed.xml" type="application/atom+xml" rel="alternate" title="Javorové lístky &mdash; Atom Feed">


  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2020-05-18T00:00:00+02:00">
  <meta property="article:author" content="https://honzajavorek.cz">
  </head>
  <body>
      <nav class="navigation container">
        <a class="navigation-link btn btn-primary" href="https://honzajavorek.cz/blog/" role="button">
          <i class="bi bi-file-earmark-text"></i> Blog
        </a>
      </nav>
      <div class="content container">
<article class="article">
  <header class="article-author author">
    <a href="https://honzajavorek.cz" class="author-link">
      <img class="author-avatar" alt="Honza Javorek" src="https://honzajavorek.cz/images/theme/honza.jpg" width="50" height="50">
      <span class="author-name">Honza Javorek</span>
    </a>
  </header>
  <h1 class="title display-5">
    Notify yourself from Python
    <small class="permalink">
      <a href="https://honzajavorek.cz/blog/notify-yourself-from-python/" rel="bookmark" title="Link to this article">
        <i class="bi bi-link-45deg"></i>
      </a>
    </small>
  </h1>
  <footer class="article-info info">
    <ul class="info-list">
      <li class="info-published">
        <i class="bi bi-calendar"></i>
        <time datetime="2020-05-18T00:00:00+02:00">
          May 18, 2020
        </time>
      </li>
      <li class="info-readtime">
        <i class="bi bi-stopwatch"></i>
        4
          min of reading
      </li>
      <li class="info-analytics">
        <i class="bi bi-graph-up"></i>
        <a href="https://simpleanalytics.com/honzajavorek.cz?search=paths%3Ablog/notify-yourself-from-python&interval=week&start=2020-05-18T00:00:00+02:00&end=today" target="_blank" rel="noopener">
            Stats
        </a>
      </li>
    </ul>
  </footer>
  <main class="article-content clearfix">
      <div class="alert alert-warning" role="alert">
        <p>
          <i class="bi bi-exclamation-triangle-fill"></i>
          This article has been published
          <strong>4 years ago</strong>.
          If you're into internet
          archeology, read it — but at your own risk. Honza doesn't
          have to necessarily agree with the content by now.
        </p>
      </div>

    <div><div><div><div><p>Sharing a quick tip on how to get notification on macOS when a function in Python is done with its job.</p>
<figure class="figure"><img alt="Reading" src="https://honzajavorek.cz/images/luis-perdigao-JMabq3k4gk8-unsplash.jpg" class="img-fluid figure-img rounded"><figcaption class="figure-caption">
Photo by <a href="https://unsplash.com/@scalabis">Luís Perdigão</a></figcaption></figure>
<h2 id="the-problem">The problem<small class="permalink"><a href="#the-problem" title="Link to this heading"><i class="bi bi-link-45deg"></i></a></small></h2>
<p>I'm working on a website for juniors in tech, <a href="https://junior.guru/">junior.guru</a> (the content is Czech only so far, I'm sorry). There is a component with web scrapers made in <a href="https://docs.scrapy.org/">Scrapy</a>, which helps me to download and aggregate job advertisments from other places.</p>
<p>I often run the scrapers on my local computer, but since it takes a few minutes until they're done, I couldn't stop myself from switching to Twitter or something while waiting. Then I often found myself watching funny cat gifs one hour later, only hardly realizing that the scrapers are probably done by then and I can resume my work.</p>
<h2 id="notification">Notification<small class="permalink"><a href="#notification" title="Link to this heading"><i class="bi bi-link-45deg"></i></a></small></h2>
<p>If all you need to support is macOS, there are at least three simple ways how to notify yourself:</p>
<ul>
<li>Terminal sound,</li>
<li>standard notification,</li>
<li>the <code>say</code> command.</li>
</ul>
<h3 id="say-say-say">Say say say<small class="permalink"><a href="#say-say-say" title="Link to this heading"><i class="bi bi-link-45deg"></i></a></small></h3>
<p>Oh, you didn't know about the <code>say</code> command? I'm sorry for ruining your productivity today then. Type the following to your terminal with sound on and see what happens:</p>
<pre class="highlight"><code><span></span><code>$ say 'Hello!'
</code></code></pre>

<p>And yes, it works for other languages, too:</p>
<pre class="highlight"><code><span></span><code>$ say -v zuzana 'Dobrý den, jedno pivo prosím'
</code></code></pre>

<p>In Python, it's easy to run commands using the <code>subprocess.run()</code> function, so in your script, one can do something like this:</p>
<pre class="highlight"><code><span></span><code><span class="kn">from</span> <span class="nn">subprocess</span> <span class="kn">import</span> <span class="n">run</span>

<span class="n">run</span><span class="p">([</span><span class="s1">'say'</span><span class="p">,</span> <span class="s1">'-v'</span><span class="p">,</span> <span class="s1">'zuzana'</span><span class="p">,</span> <span class="s1">'Jedno pivo prosím!'</span><span class="p">])</span>
</code></code></pre>

<p>This thing has one major disadvantage though. There is a significant potential it scares the shit out of me. Just imagine - you sit in a silent room, and just like that, out of nowhere, there is a human voice talking to you. It's really spooky.</p>
<p>So I've used the other two options, to have feedback on both screen (when I'm with sound off) and from speakers (when I leave the computer to e.g. brew myself a cup of coffee).</p>
<h3 id="terminal-sound">Terminal sound<small class="permalink"><a href="#terminal-sound" title="Link to this heading"><i class="bi bi-link-45deg"></i></a></small></h3>
<p>Your terminal can make a sound. There's a dedicated <a href="https://en.wikipedia.org/wiki/Bell_character">bell character</a> you can print and if you didn't mute sounds in settings or something, your terminal should beep whenever the character is printed. In Python, it can be done like this:</p>
<pre class="highlight"><code><span></span><code><span class="nb">print</span><span class="p">(</span><span class="s1">'</span><span class="se">\a</span><span class="s1">'</span><span class="p">)</span>
</code></code></pre>

<p>Better, you can remove new line from behind the print, and you can flush the <code>stdout</code> immediately:</p>
<pre class="highlight"><code><span></span><code><span class="nb">print</span><span class="p">(</span><span class="s1">'</span><span class="se">\a</span><span class="s1">'</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span> <span class="n">flush</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></code></pre>

<p>If you don't know what's "flushing <code>stdout</code>", search for keywords "output buffering python".</p>
<h3 id="standard-macos-notification">Standard macOS notification<small class="permalink"><a href="#standard-macos-notification" title="Link to this heading"><i class="bi bi-link-45deg"></i></a></small></h3>
<p>With the <a href="https://pypi.org/project/pync/">pync</a> library, you can send native macOS notifications directly from your Python code:</p>
<pre class="highlight"><code><span></span><code>$ pip install pync
</code></code></pre>

<p>Then in your Python program:</p>
<pre class="highlight"><code><span></span><code><span class="kn">import</span> <span class="nn">pync</span>

<span class="n">pync</span><span class="o">.</span><span class="n">Notifier</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s1">'Hello!'</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">'Greeting'</span><span class="p">)</span>
</code></code></pre>

<p>Check out the library's README, there're more usage examples. My personal tip is to import it with exception handling, just in case someone wants to run your code somewhere else than on macOS:</p>
<pre class="highlight"><code><span></span><code><span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">pync</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="n">pync</span> <span class="o">=</span> <span class="kc">None</span>

<span class="k">if</span> <span class="n">pync</span><span class="p">:</span>
    <span class="n">pync</span><span class="o">.</span><span class="n">Notifier</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s1">'Hello!'</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">'Greeting'</span><span class="p">)</span>
</code></code></pre>

<h2 id="decorator">Decorator<small class="permalink"><a href="#decorator" title="Link to this heading"><i class="bi bi-link-45deg"></i></a></small></h2>
<p>Now I wanted to notify myself when a long-running function ends, but I didn't want to pollute the code of the function with printing bell characters or sending notifications. Also, what if there's an error and the function raises an exception? A solution is to have the code as a function decorator. Also, that way I can easily measure duration of the function and put the result into the notification:</p>
<pre class="highlight"><code><span></span><code><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">time</span>


<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">pync</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="n">pync</span> <span class="o">=</span> <span class="kc">None</span>


<span class="k">def</span> <span class="nf">notify</span><span class="p">(</span><span class="n">fn</span><span class="p">):</span>
    <span class="nd">@wraps</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">fn</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">t0</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'</span><span class="se">\a</span><span class="s1">'</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span> <span class="n">flush</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">pync</span><span class="p">:</span>
                <span class="n">fn_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">fn</span><span class="o">.</span><span class="vm">__module__</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="n">fn</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">()'</span>
                <span class="n">pync</span><span class="o">.</span><span class="n">Notifier</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">t</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">60</span><span class="si">:</span><span class="s1">.1f</span><span class="si">}</span><span class="s1">min'</span><span class="p">,</span>
                                     <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s1">'Finished: </span><span class="si">{</span><span class="n">fn_name</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wrapper</span>
</code></code></pre>

<p>That funky thing near the end is <a href="https://pyformat.info/#number">advanced formatting</a> inside <a href="https://realpython.com/python-f-strings/">f-strings</a>. I have this code in a separate module, <code>timer.py</code>. (Module <code>timer</code>, function <code>notify</code>… well I'm unsure about proper naming yet, but this is what I have so far.) It can be used as follows:</p>
<pre class="highlight"><code><span></span><code><span class="kn">from</span> <span class="nn">.timer</span> <span class="kn">import</span> <span class="n">notify</span>

<span class="nd">@notify</span>
<span class="k">def</span> <span class="nf">long_running_function</span><span class="p">():</span>
    <span class="o">...</span>
</code></code></pre>

<p>When the function is done, my terminal beeps and a notification appears:</p>
<figure class="figure figure-blockquote"><blockquote class="blockquote">
<p><strong>Finished: myproject.mymodule.long_running_function()</strong><br>
3.5min<br></p>
</blockquote>
</figure><p>Because the notifying part is in the <code>finally</code> block, it happens even if the function raises an exception. This is great, because if I make a typo in my code, run the scrapers, and muscle memory in my fingers immediately switches windows to Twitter, the sound and notification lets me know about the mistake immediately.</p>
<h2 id="summary">Summary<small class="permalink"><a href="#summary" title="Link to this heading"><i class="bi bi-link-45deg"></i></a></small></h2>
<p>Even if you don't need to notify yourself from a Python program, I hope this article gave you some inspiration for other problems you might be solving, or taught you some new tricks. Also, now that you know about it, find some <a href="https://www.youtube.com/watch?v=uyV0IVItlM4">good use</a> for the the <code>say</code> program!</p>
<p><strong>Update:</strong> If your program targets Linux as well, my friend <a href="https://vuyisile.com/">Vuyisile Ndlovu</a> has earlier written an <a href="https://vuyisile.com/how-to-send-desktop-notifications-in-linux/">article</a> on how to send notifications on Ubuntu. Check it out!</p></div></div></div></div>
  </main>

  <footer class="article-footer mb-5">
    <div id="bio" class="article-bio bio">
      <header class="bio-header">
        <img class="bio-avatar" alt="Honza Javorek" src="https://honzajavorek.cz/images/theme/honza.jpg" width="100" height="100" loading="lazy">
        <h3 class="bio-heading">Honza Javorek</h3>
      </header>
      <address class="bio-content">
          Originally software engineer, now more of an enterpreneur.
          Creator of <a href="https://junior.guru/">junior.guru</a>, a project for Czech and Slovak beginners in coding.
          Long-term volunteer and <a href="https://pyvec.org/en/#members">official</a> in the <a href="https://python.cz/en/">Czech Python community</a>.
          Supporter of the Czech <a href="https://en.wikipedia.org/wiki/Green_Party_(Czech_Republic)">Green Party</a>.
          This is my blog for 17 years now.
      </address>
      <ul class="bio-links list-unstyled">
        <li class="bio-links-item">
          <i class="bi bi-person-circle"></i> <a href="https://honzajavorek.cz">Personal site</a>
        </li>
        <li class="bio-links-item">
          <i class="bi bi-mastodon"></i> <a href="https://mastodonczech.cz/@honzajavorek">Mastodon</a>
        </li>
        <li class="bio-links-item">
          <i class="bi bi-linkedin"></i> <a href="https://linkedin.com/in/honzajavorek">LinkedIn</a>
        </li>
        <li class="bio-links-item">
          <i class="bi bi-github"></i> <a href="https://github.com/honzajavorek/">GitHub</a>
        </li>
      </ul>
    </div>
  </footer>
</article>
      </div>
<aside class="promo seealso">
  <div id="comments" class="promo-content container pb-0">
    <h3 class="promo-heading fs-1">
Discuss this article    </h3>
    <ul class="list-unstyled mb-0">
        <li class="mb-3">
          <i class="bi bi-linkedin"></i>
          <a href="https://www.linkedin.com/posts/honzajavorek_notify-yourself-from-python-honza-javorek-activity-6668143772011896832-9cRv">
            LinkedIn</a>
        </li>
        <li class="mb-3">
          <i class="bi bi-twitter"></i>
          <a href="https://twitter.com/honzajavorek/status/1262378532476420096">
            Twitter</a>
        </li>
        <li class="mb-3">
          <i class="bi bi-facebook"></i>
          <a href="https://www.facebook.com/honzajavorek/posts/10158123579887707">
            Facebook</a>
        </li>
    </ul>
  </div>
  <div class="promo-content container">
    <h3 class="promo-heading fs-1">Read more by Honza</h3>
    <ul class="list-unstyled mb-0">
      <li class="mb-3">
        <i class="bi bi-file-earmark-text"></i>
        2023 —
        <a href="https://honzajavorek.cz/blog/empowered-by-ai-why-junior-devs-have-the-winning-edge/">
          Empowered by AI: Why junior devs have the winning edge</a>
      </li>
      <li class="mb-3">
        <i class="bi bi-file-earmark-text"></i>
        2021 —
        <a href="https://honzajavorek.cz/blog/jessica-upani-about-python-events-in-namibia-you-have-to-be-pure-in-terms-of-your-why/">
          Jessica Upani about Python events in Namibia: You have to be pure in terms of your why</a>
      </li>
      <li class="mb-3">
        <i class="bi bi-file-earmark-text"></i>
        2020 —
        <a href="https://honzajavorek.cz/blog/i-bought-apple-silicon/">
          I bought Apple Silicon</a>
      </li>
      <li class="mb-3">
        <i class="bi bi-file-earmark-text"></i>
        2020 —
        <a href="https://honzajavorek.cz/blog/courting-haskell/">
          Courting Haskell</a>
      </li>
      <li class="mb-3">
        <i class="bi bi-file-earmark-text"></i>
        2018 —
        <a href="https://honzajavorek.cz/blog/senior-engineer/">
          Senior Engineer</a>
      </li>
      <li>
        <i class="bi bi-search"></i>
        <a href="https://honzajavorek.cz/blog/">Blog archive</a>
      </li>
    </ul>
  </div>
</aside>
<aside class="promo jg">
  <div class="promo-content container">
    <img class="promo-logo" alt="junior.guru" src="https://honzajavorek.cz/images/theme/chick.svg" width="100" loading="lazy">
    <h3 class="promo-heading fs-1">I ty můžeš programovat</h3>
    <div class="promo-text">
      <p>
        Programování je <strong>příležitost</strong>. Je to tvá výhoda v kanclu, laborce, redakci.
        Ale taky nová kariéra po rodičovské, pokračování nedokončené školy, nebo prostě náhrada za blbou práci.
      </p>
      <p>
        Chceš to zkusit? Na <strong>junior.guru</strong> najdeš všechno, co potřebuješ!
      </p>
    </div>
    <ul class="promo-nav lead">
      <li class="promo-nav-item">
        <i class="bi bi-book"></i> <a href="https://junior.guru/handbook/">Příručka</a>
      </li>
      <li class="promo-nav-item">
        <i class="bi bi-mic"></i> <a href="https://junior.guru/podcast/">Podcast</a>
      </li>
      <li class="promo-nav-item">
        <i class="bi bi-play-btn"></i> <a href="https://junior.guru/courses/">Kurzy</a>
      </li>
      <li class="promo-nav-item">
        <i class="bi bi-file-earmark-check"></i> <a href="https://junior.guru/jobs/">Práce</a>
      </li>
      <li class="promo-nav-item">
        <i class="bi bi-chat"></i> <a href="https://junior.guru/club/">Klub</a>
      </li>
    </ul>
  </div>
</aside>
      <footer class="footer">
        <address class="footer-content container">
          © Copyright 2007—2024 Honza Javorek
        </address>
      </footer>
    <script defer src="https://honzajavorek.cz/theme/instant.page/instantpage.js"></script>

      <script async defer src="https://scripts.simpleanalyticscdn.com/latest.js"></script>
      <noscript><img src="https://queue.simpleanalyticscdn.com/noscript.gif" alt="" referrerpolicy="no-referrer-when-downgrade"></noscript>
  </body>
</html>