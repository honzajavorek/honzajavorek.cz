<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Javorové lístky</title><link href="https://honzajavorek.cz/blog/" rel="alternate"></link><link href="https://honzajavorek.cz/tag/php.xml" rel="self"></link><id>https://honzajavorek.cz/</id><updated>2009-08-30T01:48:00+02:00</updated><author><name>Honza Javorek</name><email>mail@honzajavorek.cz</email><uri>https://honzajavorek.cz</uri></author><subtitle>Blog Honzy Javorka</subtitle><rights>© Copyright 2007—2023 Honza Javorek &lt;https://honzajavorek.cz&gt;</rights><entry><title>Bakalář</title><link href="https://honzajavorek.cz/blog/bakalar/" rel="alternate"></link><published>2009-08-30T01:48:00+02:00</published><updated>2009-08-30T01:48:00+02:00</updated><author><name>Honza Javorek</name></author><id>tag:honzajavorek.cz,2009-08-30:/blog/bakalar/</id><content type="html">&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;p&gt;Tak jsem to všechno úspěšně dokončil. Odstátnicoval jsem za A, &lt;a href="https://honzajavorek.cz/blog/bakalarka/"&gt;bakalářka&lt;/a&gt; &lt;a href="https://www.vutbr.cz/studium/zaverecne-prace?zp_id=26168&amp;amp;aid_redir=1"&gt;Evidence geografických tras uživatele&lt;/a&gt; je taky za A. K vidění to je pod názvem &lt;a href="https://honzajavorek.cz/blog/trekmap/"&gt;TrekMap&lt;/a&gt; na &lt;a href="http://www.trekmap.cz"&gt;www.trekmap.cz&lt;/a&gt;.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</content><category term="blog"></category><category term="ajax"></category><category term="css"></category><category term="erasmus"></category><category term="html"></category><category term="javascript"></category><category term="mysql"></category><category term="php"></category><category term="projekty"></category><category term="škola"></category><category term="vut fit"></category></entry><entry><title>Joss není mrtvý</title><link href="https://honzajavorek.cz/blog/joss-neni-mrtvy/" rel="alternate"></link><published>2009-07-23T07:38:00+02:00</published><updated>2009-07-23T07:38:00+02:00</updated><author><name>Honza Javorek</name></author><id>tag:honzajavorek.cz,2009-07-23:/blog/joss-neni-mrtvy/</id><summary type="html">&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;p&gt;Můj framework/redakční systém (to druhé je ale asi fakt přespříliš honosné označení) pro tvorbu malých stránek, &lt;a href="http://code.google.com/p/joss-cms/"&gt;Joss&lt;/a&gt;, si po nějaké době nachází své fanoušky :) . Zatímco já postupně přecházím na &lt;a href="http://nettephp.com/"&gt;Nette&lt;/a&gt; i s jednoduchými weby, existují lidé, kteří Joss ocenili a používají jej. Což mi dělá samozřejmě radost!&lt;/p&gt;
&lt;p&gt;Pochvaly a …&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</summary><content type="html">&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;p&gt;Můj framework/redakční systém (to druhé je ale asi fakt přespříliš honosné označení) pro tvorbu malých stránek, &lt;a href="http://code.google.com/p/joss-cms/"&gt;Joss&lt;/a&gt;, si po nějaké době nachází své fanoušky :) . Zatímco já postupně přecházím na &lt;a href="http://nettephp.com/"&gt;Nette&lt;/a&gt; i s jednoduchými weby, existují lidé, kteří Joss ocenili a používají jej. Což mi dělá samozřejmě radost!&lt;/p&gt;
&lt;p&gt;Pochvaly a nadšení přišlo ze strany &lt;a href="http://www.michaljanik.cz/"&gt;Michala Mižu Janíka&lt;/a&gt;, který o Jossu dokonce, jak jsem si teď všiml, napsal tři články a dokonce i plugin:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.michaljanik.cz/joss"&gt;Joss, jednoduchý redakční systém pro microsite&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.michaljanik.cz/joss-seo"&gt;Joss, 4 SEO triky pro úspěšnou microsite&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.michaljanik.cz/joss-google-analytics"&gt;Modul Google Analytics pro Joss&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Já osobně už příliš tento malý framework nepotřebuju, takže v jeho vývoji nepokračuji. Na jeho úvodní stranu jsem vyvěsil informaci, že vývoj nejde dál, ale že současná verze funguje dobře. A to platí. Pokud byste chtěli ve vývoji pokračovat nebo byste chtěli s něčím na Jossu pomoci (vlastní plugin?), napište mi a jestli budu mít čas, rád vám pomůžu.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</content><category term="blog"></category><category term="joss"></category><category term="php"></category><category term="projekty"></category></entry><entry><title>MySQL Error 1449 a pitomý phpMyAdmin</title><link href="https://honzajavorek.cz/blog/mysql-error-1449-a-pitomy-phpmyadmin/" rel="alternate"></link><published>2009-02-03T14:56:00+01:00</published><updated>2009-02-03T14:56:00+01:00</updated><author><name>Honza Javorek</name></author><id>tag:honzajavorek.cz,2009-02-03:/blog/mysql-error-1449-a-pitomy-phpmyadmin/</id><summary type="html">&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;p&gt;Tak se mi stalo, že jsem &lt;strong&gt;nahrál dump databáze na localhost&lt;/strong&gt; a ona vyhodila asi takovýto error:&lt;/p&gt;
&lt;figure class="figure figure-blockquote"&gt;&lt;blockquote class="blockquote"&gt;
&lt;p&gt;There is no ‚root‘@‚%‘ registered&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/figure&gt;&lt;p&gt;Jeho číselné označení si přečtěte v titulku. Pátral jsem pátral a nakonec jsem zjistil, že příčin může být více a zjistit o tom nejde skoro nic. Prima. Každopádně …&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</summary><content type="html">&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;p&gt;Tak se mi stalo, že jsem &lt;strong&gt;nahrál dump databáze na localhost&lt;/strong&gt; a ona vyhodila asi takovýto error:&lt;/p&gt;
&lt;figure class="figure figure-blockquote"&gt;&lt;blockquote class="blockquote"&gt;
&lt;p&gt;There is no ‚root‘@‚%‘ registered&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/figure&gt;&lt;p&gt;Jeho číselné označení si přečtěte v titulku. Pátral jsem pátral a nakonec jsem zjistil, že příčin může být více a zjistit o tom nejde skoro nic. Prima. Každopádně můj problém byl způsobený tím, že v databázi byly pohledy (&lt;code&gt;VIEW&lt;/code&gt;) a ty mají &lt;strong&gt;nastaveno určité oprávnění&lt;/strong&gt;. Je to kvůli bezpečnosti atd. – viz &lt;a href="http://dev.mysql.com/doc/refman/5.0/en/create-view.html"&gt;manuál&lt;/a&gt;, no každopádně když si to tam &lt;strong&gt;nastavíte špatně&lt;/strong&gt;, tak máte smůlu. Při tvorbě &lt;code&gt;VIEW&lt;/code&gt; máte možnost zadat &lt;code&gt;SQL SECURITY&lt;/code&gt; jako &lt;code&gt;DEFINER&lt;/code&gt; nebo &lt;code&gt;INVOKER&lt;/code&gt;. Někdy se může hodit to první, tedy přesné nastavení uživatele na serveru, ale pro normální přenos kamkoliv jinam bez omezení je asi lepší &lt;code&gt;INVOKER&lt;/code&gt;, což by měl být &lt;strong&gt;ten, kdo pohled spouští&lt;/strong&gt;. Zajímavá diskuse k tématu je &lt;a href="http://groups.google.com/group/comp.databases.mysql/browse_thread/thread/d8e6da7244a13788?pli=1"&gt;zde&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Ale já přeci &lt;strong&gt;nic nenastavoval&lt;/strong&gt; :| . Mám čistý dump z phpMyAdmina! No, to je sice hezké, ale phpMyAdmin s těmi &lt;code&gt;VIEW&lt;/code&gt; moc neumí a přiřazuje každému nějaký defaultní &lt;code&gt;DEFINER&lt;/code&gt;, který si vygeneruje (v mém případě &lt;code&gt;'root'@'%'&lt;/code&gt;). Ten samozřejmě &lt;strong&gt;na jiném PC vůbec neexistuje&lt;/strong&gt;. V phpMyAdminu mi to ani nešlo změnit, musel jsem to přepsat přímo v SQL a potom se to rozjelo. No asi mám nějaký starý phpMyAdmin, říkám si, takže stahuju a zkouším nový s myšlenkou, že to snad už dopilovali.&lt;/p&gt;
&lt;p&gt;No, a světe div se, sice má více možností práce s &lt;code&gt;VIEW&lt;/code&gt;, ale &lt;strong&gt;kazí export úplně stejně jako ten starý&lt;/strong&gt;. Nikde nevidím nastavení tohoto omezení – ani v nabídkách pro pohledy, ani při exportu. Ach jo, takže &lt;strong&gt;ruční práce&lt;/strong&gt; a dávat si pozor… Nic jiného nezbývá :( .&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</content><category term="blog"></category><category term="fail"></category><category term="mysql"></category><category term="php"></category></entry><entry><title>Pár triků pro mod_rewrite a .htaccess</title><link href="https://honzajavorek.cz/blog/par-triku-pro-mod-rewrite-a-htaccess/" rel="alternate"></link><published>2008-08-27T08:10:00+02:00</published><updated>2008-08-27T08:10:00+02:00</updated><author><name>Honza Javorek</name></author><id>tag:honzajavorek.cz,2008-08-27:/blog/par-triku-pro-mod-rewrite-a-htaccess/</id><summary type="html">&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;p&gt;Velmi často je součástí webového serveru tzv. &lt;code&gt;mod_rewrite&lt;/code&gt;, který nám povoluje přepisovat jakékoliv požadavky od uživatele na jiné. Například přepsat nebo přesměrovat adresu. Více o &lt;code&gt;mod_rewrite&lt;/code&gt; a souboru &lt;code&gt;.htaccess&lt;/code&gt;, jenž s ním úzce souvisí, najdete třeba na &lt;a href="http://www.jakpsatweb.cz/server/htaccess.html"&gt;Jak psát web&lt;/a&gt;. Ta nejlepší helpka je však velmi pěkně napsaný &lt;a href="http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html"&gt;originální manuál …&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</summary><content type="html">&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;p&gt;Velmi často je součástí webového serveru tzv. &lt;code&gt;mod_rewrite&lt;/code&gt;, který nám povoluje přepisovat jakékoliv požadavky od uživatele na jiné. Například přepsat nebo přesměrovat adresu. Více o &lt;code&gt;mod_rewrite&lt;/code&gt; a souboru &lt;code&gt;.htaccess&lt;/code&gt;, jenž s ním úzce souvisí, najdete třeba na &lt;a href="http://www.jakpsatweb.cz/server/htaccess.html"&gt;Jak psát web&lt;/a&gt;. Ta nejlepší helpka je však velmi pěkně napsaný &lt;a href="http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html"&gt;originální manuál&lt;/a&gt;. Já se zkusím podělit o několik užitečných &lt;em&gt;code snippets&lt;/em&gt;, které jsem časem nashromáždil…&lt;/p&gt;
&lt;h2 id="lomitka-na-koncich"&gt;Lomítka na koncích&lt;small class="permalink"&gt;&lt;a href="#lomitka-na-koncich" title="Odkaz na tento nadpis"&gt;&lt;i class="bi bi-link-45deg"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/small&gt;&lt;/h2&gt;
&lt;p&gt;Přesměruje adresy &lt;code&gt;tralala.com/venku/je/tma&lt;/code&gt; na &lt;code&gt;tralala.com/venku/je/tma/&lt;/code&gt;.&lt;/p&gt;
&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c"&gt;## endslashes&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="nb"&gt;RewriteCond&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;%{REQUEST_FILENAME}&lt;span class="w"&gt; &lt;/span&gt;!-f&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="nb"&gt;RewriteCond&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;%{ENV:REDIRECT_STATUS}&lt;span class="w"&gt; &lt;/span&gt;^$&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="nb"&gt;RewriteCond&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;%{REQUEST_URI}&lt;span class="w"&gt; &lt;/span&gt;!\/$&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="nb"&gt;RewriteRule&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;(.*)&lt;span class="w"&gt; &lt;/span&gt;$0/&lt;span class="w"&gt; &lt;/span&gt;[R=301,NE,L]&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id="hezka-a-vselijaka-url-pro-aplikaci-v-php"&gt;Hezká a všelijaká URL pro aplikaci v PHP&lt;small class="permalink"&gt;&lt;a href="#hezka-a-vselijaka-url-pro-aplikaci-v-php" title="Odkaz na tento nadpis"&gt;&lt;i class="bi bi-link-45deg"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/small&gt;&lt;/h2&gt;
&lt;p&gt;Žádných složitých 50 regulárních výrazů na to, co vlastně s těmi adresami chceme… Stačí jeden kouzelný řádek, který úplně vše přesměruje na &lt;code&gt;index.php&lt;/code&gt; a potom si adresu rozparsujeme přímo v PHP (dostupná v &lt;code&gt;$_SERVER['REQUEST_URI']&lt;/code&gt;).&lt;/p&gt;
&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nb"&gt;RewriteCond&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;%{REQUEST_FILENAME}&lt;span class="w"&gt; &lt;/span&gt;!-f&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="nb"&gt;RewriteCond&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;%{REQUEST_FILENAME}&lt;span class="w"&gt; &lt;/span&gt;!-d&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="nb"&gt;RewriteRule&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;.&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="sx"&gt;/index.php&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;[L]&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id="presmerovani-rss-na-feedburner"&gt;Přesměrování RSS na FeedBurner&lt;small class="permalink"&gt;&lt;a href="#presmerovani-rss-na-feedburner" title="Odkaz na tento nadpis"&gt;&lt;i class="bi bi-link-45deg"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/small&gt;&lt;/h2&gt;
&lt;p&gt;Chcete &lt;a href="http://www.feedburner.com"&gt;statistiky přístupů&lt;/a&gt; na vaše RSS, ale nechcete obtěžovat odběratele článků se změnami adresy? Přesměrujte je. Není to tak snadné jak se zdá, protože přesměrování se nesmí provést, když se na váš &lt;em&gt;feed&lt;/em&gt; snaží dostat samotný FeedBurner (to se pak logicky zacyklí). Sofistikovanější postupy pro WordPress najdete v &lt;a href="http://www.askapache.com/htaccess/redirecting-wordpress-feeds-to-feedburner.html"&gt;článku na AskApache&lt;/a&gt;, já jsem si vystačil s tímto:&lt;/p&gt;
&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c"&gt;## feedburner&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="nb"&gt;RewriteCond&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;%{HTTP_USER_AGENT}&lt;span class="w"&gt; &lt;/span&gt;!^.*(FeedBurner|FeedValidator|Recent)&lt;span class="w"&gt; &lt;/span&gt;[NC]&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="nb"&gt;RewriteRule&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;^feed/?$&lt;span class="w"&gt; &lt;/span&gt;http://feeds.feedburner.com/javorovelistky&lt;span class="w"&gt; &lt;/span&gt;[R=302,L]&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id="chybove-stranky"&gt;Chybové stránky&lt;small class="permalink"&gt;&lt;a href="#chybove-stranky" title="Odkaz na tento nadpis"&gt;&lt;i class="bi bi-link-45deg"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/small&gt;&lt;/h2&gt;
&lt;p&gt;Pokud zadáte relativní cestu, původní URL zůstane v adresním řádku prohlížeče a zobrazí se vám tato chybová stránka. Pokud zadáte absolutní, přesměruje se chyba zcela na soubor s chybovou stránkou (což podle mě není dobrý nápad).&lt;/p&gt;
&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c"&gt;## errorpages&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="nb"&gt;ErrorDocument&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;404&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="sx"&gt;/joss/&lt;/span&gt;?doc=_404&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="nb"&gt;ErrorDocument&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;403&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="sx"&gt;/joss/&lt;/span&gt;?doc=_403&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id="taticek-htaccess"&gt;Tatíček .htaccess&lt;small class="permalink"&gt;&lt;a href="#taticek-htaccess" title="Odkaz na tento nadpis"&gt;&lt;i class="bi bi-link-45deg"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/small&gt;&lt;/h2&gt;
&lt;p&gt;Neodolal jsem a nakonec ještě přidám několik osvědčených kousků i pro samotný &lt;code&gt;.htaccess&lt;/code&gt;. Někdy je dobré na web jen na oko zamezit přístup, alespoň přes hlavní stránku. Jelikož ta se většinou volá přes &lt;code&gt;index.php&lt;/code&gt;, teoreticky stačí vložit do rootu webu &lt;code&gt;index.html&lt;/code&gt; a něco do něj napsat. Toto zajistí, že se určitě bude HTML verze zobrazovat prioritně:&lt;/p&gt;
&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nb"&gt;DirectoryIndex&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;index.html&lt;span class="w"&gt; &lt;/span&gt;index.php&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Skryté soubory by se neměly nikomu dostat do rukou. Správný server má toto už v globálním nastavení, ale člověk nikdy neví…&lt;/p&gt;
&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;Files&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;~ "^[\.]"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nb"&gt;Order&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;allow,deny&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nb"&gt;Deny&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;from&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;all&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nb"&gt;Satisfy&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;All&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/Files&amp;gt;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Nevíte jestli na cílovém serveru bude &lt;code&gt;mod_rewrite&lt;/code&gt; a nechcete riskovat &lt;em&gt;Internal Server Error 500&lt;/em&gt;? Stačí vše obalit podmínkou…&lt;/p&gt;
&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;IfModule&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;mod_rewrite.c&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nb"&gt;RewriteEngine&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;on&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;...&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/IfModule&amp;gt;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;A co tak si nastavit PHP?&lt;/p&gt;
&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;IfModule&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;mod_php5.c&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="c"&gt;# development setting&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nb"&gt;php_flag&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;display_errors&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="c"&gt;# safety&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nb"&gt;php_flag&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;register_globals&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="c"&gt;# allowed stealing from other websites ;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nb"&gt;php_flag&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;allow_url_fopen&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="c"&gt;# fu*king quotes...&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nb"&gt;php_flag&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;magic_quotes_gpc&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nb"&gt;php_flag&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;magic_quotes_runtime&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nb"&gt;php_flag&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;magic_quotes_sybase&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="c"&gt;# yes, I love short open tags!&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nb"&gt;php_flag&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;short_open_tag&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="c"&gt;# utf forever&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nb"&gt;php_flag&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;default_charset&lt;span class="w"&gt; &lt;/span&gt;utf-8&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/IfModule&amp;gt;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id="zaverem"&gt;Závěrem&lt;small class="permalink"&gt;&lt;a href="#zaverem" title="Odkaz na tento nadpis"&gt;&lt;i class="bi bi-link-45deg"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/small&gt;&lt;/h2&gt;
&lt;p&gt;Pokud byste měli nějaké další dobré tipy, podělte se v komentářích. Doufám, že se vám tyto útržky kódu budou hodit a usnadní vám život. Ne že bych byl expert na &lt;code&gt;mod_rewrite&lt;/code&gt; nebo nastavení Apache přes &lt;code&gt;.htaccess&lt;/code&gt;, ale už z toho co umím mohu usoudit, že jsou to opravdu silné a velmi užitečné nástroje, bez nichž bych si dneska pohyb po hostinzích nebo vlastním serveru představil jen stěží. Mnohdy je sice možné řešit totéž jiným způsobem, ale touto cestou je to mnohdy rychlejší, elegantnější a na pohled hezčí :) . Takže kdo s nimi ještě nezačal… Hurá do toho!&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</content><category term="blog"></category><category term="apache"></category><category term="mod_rewrite"></category><category term="php"></category><category term="projekty"></category><category term="webdesign"></category></entry><entry><title>Ultralight mezi PHP frameworky: Joss</title><link href="https://honzajavorek.cz/blog/ultralight-mezi-php-frameworky-joss/" rel="alternate"></link><published>2008-08-20T07:54:00+02:00</published><updated>2008-08-20T07:54:00+02:00</updated><author><name>Honza Javorek</name></author><id>tag:honzajavorek.cz,2008-08-20:/blog/ultralight-mezi-php-frameworky-joss/</id><summary type="html">&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;p&gt;&lt;img alt="obrázek" class="right" src="https://honzajavorek.cz/images/64.jpg"&gt;Před časem jsem se na blogu zmínil, že se &lt;a href="https://honzajavorek.cz/blog/narodil-se-joss/"&gt;narodil Joss&lt;/a&gt;. Dneska bych chtěl konečně napsat, co &lt;a href="http://code.google.com/p/joss-cms/"&gt;Joss&lt;/a&gt; je, proč se narodil a proč byste si ho měli stáhnout a používat. Od 14. srpna navíc ve &lt;a href="http://joss-cms.googlecode.com/files/joss1.1.1.zip"&gt;zcela nové verzi 1.1.1&lt;/a&gt;, která přináší opravy a mnohé nové funkce a …&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</summary><content type="html">&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;p&gt;&lt;img alt="obrázek" class="right" src="https://honzajavorek.cz/images/64.jpg"&gt;Před časem jsem se na blogu zmínil, že se &lt;a href="https://honzajavorek.cz/blog/narodil-se-joss/"&gt;narodil Joss&lt;/a&gt;. Dneska bych chtěl konečně napsat, co &lt;a href="http://code.google.com/p/joss-cms/"&gt;Joss&lt;/a&gt; je, proč se narodil a proč byste si ho měli stáhnout a používat. Od 14. srpna navíc ve &lt;a href="http://joss-cms.googlecode.com/files/joss1.1.1.zip"&gt;zcela nové verzi 1.1.1&lt;/a&gt;, která přináší opravy a mnohé nové funkce a pokud jste něco vyvinuli na starém Jossu, asi vám dá trochu do těla (&lt;strong&gt;není&lt;/strong&gt; zpětně kompatibilní).&lt;/p&gt;
&lt;h2 id="specialista-na-male-weby"&gt;Specialista na malé weby&lt;small class="permalink"&gt;&lt;a href="#specialista-na-male-weby" title="Odkaz na tento nadpis"&gt;&lt;i class="bi bi-link-45deg"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/small&gt;&lt;/h2&gt;
&lt;p&gt;Joss je takový… ultralight mezi frameworky. A jednou možná i redakčními systémy v PHP(5). Nejpůvodnější jádro aplikace vzniklo na základě nápadu za dva dny, zbytek se pak asi půl roku vyvíjel, ladil, upravoval a doplňoval.&lt;/p&gt;
&lt;p&gt;Jeho výhodou je to, že skoro nic neumí :) . Umí přesně jednu jednoduchou věc, ale pořádně. Nevystavíte nad ním sice tedy portál s fotogalerií, fórem a blogem, ale web o pěti stránkách s ním zvládnete sakramentsky rychle.&lt;/p&gt;
&lt;p&gt;Joss navíc vytvoří web &lt;strong&gt;hezky&lt;/strong&gt;. Tak, jako kdybyste ho udělali ručně za spoustu hodin, kdybyste si s tím chtěli fakt vyhrát a nezapomenout na každý detail. Programoval jsem ho proto, že mi chyběl „framework“ na velmi jednoduché weby. Takové, kde nepotřebuji formuláře, kde neřeším žádné složitosti, ale chci na nich mít pěkně kódovaný obsah a nechci je dělat otrocky v &lt;code&gt;.html&lt;/code&gt; souborech. Takové, kde mohu velmi pohodlně editovat obsah stránek – zcela jednoduše na bázi textových souborů zapsaných v &lt;a href="http:www.texy.info"&gt;Texy!&lt;/a&gt;. Když přidám soubor, vytvořím automaticky stránku. Když jej upravím, upravím ji. Smažu? Smažu stránku! :)&lt;/p&gt;
&lt;h2 id="proc-pouzit-joss"&gt;Proč použít Joss?&lt;small class="permalink"&gt;&lt;a href="#proc-pouzit-joss" title="Odkaz na tento nadpis"&gt;&lt;i class="bi bi-link-45deg"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/small&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;umožňuje &lt;strong&gt;bleskové vytvoření malých a středních webů&lt;/strong&gt; bez klikací uživatelské administrace&lt;/li&gt;
&lt;li&gt;framework &lt;strong&gt;lze pochopit asi za hodinu&lt;/strong&gt; čtení dokumentace a hrátek s kódem&lt;/li&gt;
&lt;li&gt;framework má &lt;strong&gt;jen pár set kilobajtů&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;malé požadavky, instalace a konfigurace na &lt;strong&gt;pět minut&lt;/strong&gt;, přesun webu jinam je na &lt;strong&gt;tři minuty&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;pro psaní vlastního obsahu webu &lt;strong&gt;nemusíte znát HTML&lt;/strong&gt; – web je kompletně v Texy! souborech&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="co-umi-ceho-je-schopen-co-v-sobe-skryva"&gt;Co umí, čeho je schopen, co v sobě skrývá&lt;small class="permalink"&gt;&lt;a href="#co-umi-ceho-je-schopen-co-v-sobe-skryva" title="Odkaz na tento nadpis"&gt;&lt;i class="bi bi-link-45deg"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/small&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;umožňuje více jazykových verzí webu&lt;/li&gt;
&lt;li&gt;rozšiřitelnost syntaxe na bázi pluginů (+ několik již připravených)&lt;/li&gt;
&lt;li&gt;řeší základní a notoricky známé i méně známé nástrahy PHP a HTTP/HTML&lt;/li&gt;
&lt;li&gt;cachuje výstupy (tzn. je rychlý)&lt;/li&gt;
&lt;li&gt;obsahuje &lt;a href="http://www.texy.info"&gt;Texy!&lt;/a&gt; a některé části z &lt;a href="http://nettephp.com"&gt;Nette&lt;/a&gt; (cca 4 :) )&lt;/li&gt;
&lt;li&gt;obsahuje jednoduchý RSS agregátor, snadno pracuje s XML&lt;/li&gt;
&lt;li&gt;automatické generování sitemap.xml, robots.txt, .htaccess, …&lt;/li&gt;
&lt;li&gt;tvoří pěkný a validní XHTML kód&lt;/li&gt;
&lt;li&gt;automaticky generuje hlavičku webu, sám připojí styly, favicon, skripty, …&lt;/li&gt;
&lt;li&gt;stará se o chybové stránky (404, 403…)&lt;/li&gt;
&lt;li&gt;podpora pro hierarchická menu&lt;/li&gt;
&lt;li&gt;konfigurace (dříve v INI, teď v XML)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="co-nikdy-umet-nebude"&gt;Co nikdy umět nebude&lt;small class="permalink"&gt;&lt;a href="#co-nikdy-umet-nebude" title="Odkaz na tento nadpis"&gt;&lt;i class="bi bi-link-45deg"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/small&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;formuláře, dynamické prvky… (Joss nikdy nebyl k těmto činnostem zamýšlen a proto by jejich implementace do návrhu nebyla moc dobře možná)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="a-co-se-chysta"&gt;A co se chystá?&lt;small class="permalink"&gt;&lt;a href="#a-co-se-chysta" title="Odkaz na tento nadpis"&gt;&lt;i class="bi bi-link-45deg"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/small&gt;&lt;/h2&gt;
&lt;p&gt;Mno, už nic moc, já jsem spokojen ;) . Ještě by se mi šikl jednoduchý a snadno ovladatelný backend na jedno heslo, kde bych si já nebo třeba i klient mohl upravit web i bez handlování se soubory a FTP. Ale to je spíš daleký horizont, moc jsem to nepromýšlel a hlavně bych k tomu chtěl použít jen vrstvu obsahující JavaScript/AJAX (ano, bez něj si prostě web přes prohlížeč neupravíte, holt smůla). A to já zatím neumím :) .&lt;/p&gt;
&lt;h2 id="ale-co-ty-slozitejsi-veci"&gt;Ale co ty složitější věci?&lt;small class="permalink"&gt;&lt;a href="#ale-co-ty-slozitejsi-veci" title="Odkaz na tento nadpis"&gt;&lt;i class="bi bi-link-45deg"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/small&gt;&lt;/h2&gt;
&lt;p&gt;Na složitější věci použijte jiný, robustní PHP framework. Joss byl vytvořen k tomu, aby neuměl nic, ale aby to nic zvládal perfektně. Já se teď učím Nette, ale frameworků je spousta (dokonce, na rozdíl od Nette, s dokumentací ;) ).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://codeigniter.com/"&gt;CodeIgniter&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://cakephp.org/"&gt;CakePHP&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://framework.zend.com/"&gt;Zend Framework&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://nettephp.com/"&gt;Nette&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="takze"&gt;Takže?&lt;small class="permalink"&gt;&lt;a href="#takze" title="Odkaz na tento nadpis"&gt;&lt;i class="bi bi-link-45deg"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/small&gt;&lt;/h2&gt;
&lt;p&gt;Jak se vám líbí? Napsal jsem k Jossu českou dokumentaci (za chyby neručím, je složité udržovat v ní aktuální změny ve funkčnosti… ale snažil jsem se…), kousek anglické, testoval jsem ho, stavěl na něm weby. Máte chuť se nějak podílet (třeba… anglická dokumentace), testovat, diskutovat? Nikdo vám nebrání! Je poptávka po kompletní anglické dokumentaci? Máte nějaký nápad na novou funkci? Napište mi!&lt;/p&gt;
&lt;p&gt;Přeji do života Jossu hodně štěstí a doufám, že bude líbit. A hodit! :P&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</content><category term="blog"></category><category term="joss"></category><category term="php"></category><category term="projekty"></category></entry><entry><title>Když potřebujeme register_globals</title><link href="https://honzajavorek.cz/blog/kdyz-potrebujeme-register_globals/" rel="alternate"></link><published>2008-08-16T15:27:00+02:00</published><updated>2008-08-16T15:27:00+02:00</updated><author><name>Honza Javorek</name></author><id>tag:honzajavorek.cz,2008-08-16:/blog/kdyz-potrebujeme-register_globals/</id><summary type="html">&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;p&gt;Stalo se tuším od jedné z podverzí PHP4 dobrým zvykem &lt;strong&gt;vypínat v PHP direktivu register_globals&lt;/strong&gt;. Naštěstí. Díky tomu pak nemáme přístup k příchozím datům přes různě pojmenované proměnné, ale máme je hezky v globálních polích, třízena podle způsobu, jakým k nám přišla. To je nejen o dost přehlednější, ale také …&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</summary><content type="html">&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;p&gt;Stalo se tuším od jedné z podverzí PHP4 dobrým zvykem &lt;strong&gt;vypínat v PHP direktivu register_globals&lt;/strong&gt;. Naštěstí. Díky tomu pak nemáme přístup k příchozím datům přes různě pojmenované proměnné, ale máme je hezky v globálních polích, třízena podle způsobu, jakým k nám přišla. To je nejen o dost přehlednější, ale také bezpečnější.&lt;/p&gt;
&lt;p&gt;Co ale dělat, když máme nějaký starý projekt napsaný se zapnutými register_globals? Určitě je jednodušší je zapnout a případně si pohlídat bezpečnostní rizika, než přepisovat celý kód. Máme tři možnosti:&lt;/p&gt;
&lt;h2 id="apache"&gt;Apache&lt;small class="permalink"&gt;&lt;a href="#apache" title="Odkaz na tento nadpis"&gt;&lt;i class="bi bi-link-45deg"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/small&gt;&lt;/h2&gt;
&lt;p&gt;Serveru řekneme co potřebujeme v souboru &lt;code&gt;.htaccess&lt;/code&gt;.&lt;/p&gt;
&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nb"&gt;php_flag&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;register_globals&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id="zmena-nastaveni-primo-v-php"&gt;Změna nastavení přímo v PHP&lt;small class="permalink"&gt;&lt;a href="#zmena-nastaveni-primo-v-php" title="Odkaz na tento nadpis"&gt;&lt;i class="bi bi-link-45deg"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/small&gt;&lt;/h2&gt;
&lt;p&gt;Použijeme &lt;a href="http://cz2.php.net/manual/en/function.ini-set.php"&gt;ini_set&lt;/a&gt;.&lt;/p&gt;
&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="x"&gt;ini_set('register_globals','on');&lt;/span&gt;
&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id="nastaveni-na-serveru-nelze-zmenit"&gt;Nastavení na serveru nelze změnit&lt;small class="permalink"&gt;&lt;a href="#nastaveni-na-serveru-nelze-zmenit" title="Odkaz na tento nadpis"&gt;&lt;i class="bi bi-link-45deg"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/small&gt;&lt;/h2&gt;
&lt;p&gt;V tomto případě nám nezbyde, než si ručně proměnné vytvořit.&lt;/p&gt;
&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="x"&gt;extract($_REQUEST);&lt;/span&gt;
&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</content><category term="blog"></category><category term="php"></category></entry><entry><title>Šablony v PHP a jak obejít nepodporu short open tags</title><link href="https://honzajavorek.cz/blog/sablony-v-php-a-jak-obejit-nepodporu-short-open-tags/" rel="alternate"></link><published>2008-08-09T16:26:00+02:00</published><updated>2008-08-09T16:26:00+02:00</updated><author><name>Honza Javorek</name></author><id>tag:honzajavorek.cz,2008-08-09:/blog/sablony-v-php-a-jak-obejit-nepodporu-short-open-tags/</id><summary type="html">&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;p&gt;Jestliže vás nalákal nadpis a nechcete číst širší úvod do problému šablon v PHP, poskočte o něco níže, tam už to tak široké není a článek lze ve zdraví přebrodit celkem rychle ;) .&lt;/p&gt;
&lt;p&gt;Píšete-li aplikaci v PHP a nejste-li v programování vepř, sele, prasnice nebo něco k tomu blízkého (vyjma kance …&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</summary><content type="html">&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;p&gt;Jestliže vás nalákal nadpis a nechcete číst širší úvod do problému šablon v PHP, poskočte o něco níže, tam už to tak široké není a článek lze ve zdraví přebrodit celkem rychle ;) .&lt;/p&gt;
&lt;p&gt;Píšete-li aplikaci v PHP a nejste-li v programování vepř, sele, prasnice nebo něco k tomu blízkého (vyjma kance, kanec být můžete), dříve či později pocítíte přinejmenším touhu &lt;strong&gt;oddělit prezentační vrstvu od zbytku&lt;/strong&gt;. Nabízí se několik přístupů, co s touto touhou…&lt;/p&gt;
&lt;h2 id="jamalalicha-paprtala-chanua-chanua-chanua"&gt;Jamalalicha, paprťála, chánua, chánua, chánua&lt;small class="permalink"&gt;&lt;a href="#jamalalicha-paprtala-chanua-chanua-chanua" title="Odkaz na tento nadpis"&gt;&lt;i class="bi bi-link-45deg"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/small&gt;&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Žádná&lt;/strong&gt; prezentační vrstva. Napaprťálujem to všechno do jednoho klubka, PHP do HTML, XML do PHP, CSS nějak k tomu a budeme mít binec, ale budeme to mít za 40 minut. Pokud po nás někdo kód dostane do rukou, nemá šanci s ním něco provést. Jestliže chceme oslovit kodéra, aby dělal na projektu úpravy, platíme mu poté pobyt v Bohnicích nebo, pro jihomoravské, Černovicích. Člověk by se divil, ale na takovém přístupu dnes stojí velké procento existujících webů a to i takových, do nichž byste to při pohledu zvenčí ani neřekli (nebo by vás napadlo, že je to sebevražda). Autoři těchto projektů neřeší dilema Smarty vs. PHP (viz dále), protože většinou ani nevědí, že taková řešení existují.&lt;/p&gt;
&lt;h2 id="kdyz-vrstva-tak-vrstva"&gt;Když vrstva, tak vrstva&lt;small class="permalink"&gt;&lt;a href="#kdyz-vrstva-tak-vrstva" title="Odkaz na tento nadpis"&gt;&lt;i class="bi bi-link-45deg"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/small&gt;&lt;/h2&gt;
&lt;p&gt;Použijete &lt;strong&gt;robustní šablonovací systém&lt;/strong&gt;, který vytváří opravdovou vrstvu ve vaší aplikaci, možná bude větší než ona a dal by se označit jako takový pseudojazyk někde mezi HTML a PHP. Dle mého názoru nepříliš šťastná cesta, na můj vkus málo elegantní a minimalistická. Nicméně hojně používaná a má davy zastánců. Nejrozšířenějšími šablonami jsou &lt;a href="http://www.smarty.net/"&gt;Smarty&lt;/a&gt; (&lt;a href="http://smarty.ronnieweb.net/"&gt;pěkný český návod&lt;/a&gt;), ale existují desítky.&lt;/p&gt;
&lt;h2 id="php-je-sablonovaci-system-zlata-stredni-cesta"&gt;PHP je šablonovací systém – zlatá střední cesta?&lt;small class="permalink"&gt;&lt;a href="#php-je-sablonovaci-system-zlata-stredni-cesta" title="Odkaz na tento nadpis"&gt;&lt;i class="bi bi-link-45deg"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/small&gt;&lt;/h2&gt;
&lt;p&gt;Napíšete si &lt;strong&gt;jednu třídu v PHP, která vám vytvoří plně funkční šablony&lt;/strong&gt; a místo pseudojazyka v nich použijete PHP. Zní to zvláštně, ale opravdu to jde a dle mého názoru je to nejelegantnější řešení. Nesmíte samozřejmě tahat logiku aplikace do šablon, ač je to možné – v šabloně použijete PHP jen k nějakému tomu echo a foreach. Alternativní syntaxe PHP jako &lt;em&gt;short open tags&lt;/em&gt; nebo &lt;em&gt;if/endif&lt;/em&gt; přímo k takovému použití vybízí. Více &lt;a href="http://massassi.com/php/articles/template_engines/"&gt;třeba zde&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="ano-zlata-stredni"&gt;Ano, zlatá střední&lt;small class="permalink"&gt;&lt;a href="#ano-zlata-stredni" title="Odkaz na tento nadpis"&gt;&lt;i class="bi bi-link-45deg"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/small&gt;&lt;/h2&gt;
&lt;p&gt;Ve vodách internetu najdete neplodné, plodné, těhotné a i jinak objemné diskuse o tom, jestli použít PHP jako šablonovací jazyk, nebo nasadit moloch typu Smarty. Asi jak na co. Já mám zatím jasno – jsem zastáncem &lt;strong&gt;hbitých a chytrých řešení&lt;/strong&gt; a tyto požadavky splňuje ona střední cesta, jak jsem ji vylíčil v předešlém odstavci. Nechci se hádat co je lepší – prostě jen napíšu, že pro mě je lepší tato varianta a proto mám rád takové ty na první pohled obskurní věci, jako například short open tags:&lt;/p&gt;
&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="cp"&gt;&amp;lt;?&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;$var&lt;/span&gt; &lt;span class="cp"&gt;?&amp;gt;&lt;/span&gt;&lt;span class="x"&gt; je totez jako konvencni &lt;/span&gt;&lt;span class="cp"&gt;&amp;lt;?php&lt;/span&gt; &lt;span class="k"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$var&lt;/span&gt; &lt;span class="cp"&gt;?&amp;gt;&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;&amp;lt;?&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="cp"&gt;?&amp;gt;&lt;/span&gt;&lt;span class="x"&gt; je totez jako delsi &lt;/span&gt;&lt;span class="cp"&gt;&amp;lt;?php&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="cp"&gt;?&amp;gt;&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;V běžném PHP je to celkem na uškrcení, ale v šablonách dle mého názoru k nezaplacení.&lt;/p&gt;
&lt;h2 id="jtemplate"&gt;JTemplate&lt;small class="permalink"&gt;&lt;a href="#jtemplate" title="Odkaz na tento nadpis"&gt;&lt;i class="bi bi-link-45deg"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/small&gt;&lt;/h2&gt;
&lt;p&gt;Ve svých projektech používám šablony postavené na vlastní třídě &lt;a href="http://code.google.com/p/joss-cms/source/browse/trunk/class/JTemplate.php"&gt;JTemplate&lt;/a&gt; (tady se vyplatí kliknout, vážně). Spolu s dalšími &lt;strong&gt;umí výstupy cachovat&lt;/strong&gt; a tím razantně zvyšovat výkon aplikace. V zásadě je postavená na myšlence popsané ve výše odkazovaném článku Briana Loziera.&lt;/p&gt;
&lt;p&gt;Čím je ale zvláštní? Funkcí &lt;code&gt;fetch&lt;/code&gt;. Ta je jádrem zpracování a jde v ní běžně o to, že se do aktuálního kontextu rozbalí proměnné uložené do šablony (funkce &lt;a href="http://cz.php.net/manual/en/function.extract.php"&gt;extract&lt;/a&gt;), začne se odchytávat výstup na obrazovku (&lt;a href="http://cz.php.net/manual/en/ref.outcontrol.php"&gt;ob_… funkce&lt;/a&gt;) a vloží se (obyčejný include) soubor se šablonou jako PHP. V něm se použijí rozbalené lokální proměnné a vše se poslušně vytiskne ven. No ven úplně ne, protože výstup samozřejmě odchytáváme, takže vše co jde ven hezky sbalíme do &lt;em&gt;output control pytle&lt;/em&gt; a necháme uložené jako string v nějaké proměnné, kterou vrátíme jako výsledek funkce (a obsah pak v aplikaci vytiskneme později kdykoliv chceme).&lt;/p&gt;
&lt;h2 id="pro-zmenu-short-open-tags"&gt;Pro změnu… Short open tags!&lt;small class="permalink"&gt;&lt;a href="#pro-zmenu-short-open-tags" title="Odkaz na tento nadpis"&gt;&lt;i class="bi bi-link-45deg"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/small&gt;&lt;/h2&gt;
&lt;p&gt;„Takové krásné šablony,“ řekli byste. Ale pak to nahrajete na první hosting a &lt;strong&gt;celé se vám rozsypou&lt;/strong&gt;, protože tam mají &lt;strong&gt;vypnutou podporu short open tags&lt;/strong&gt;, které samozřejmě hojně a s radostí používáte. Co s tím? Buď je nepoužívat (což je škoda), nebo přidat jeden &lt;em&gt;požadavek&lt;/em&gt; navíc a snížit tak možnost nasazení aplikace. Nebo vymyslet něco chytrého ;) .&lt;/p&gt;
&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="x"&gt;if (!ini_get('short_open_tag')) {&lt;/span&gt;
&lt;span class="x"&gt;    // explicit short open tags support&lt;/span&gt;
&lt;span class="x"&gt;    eval('?&amp;gt;' . preg_replace(&lt;/span&gt;
&lt;span class="x"&gt;            array('~&amp;lt;\\?(\\s)~', '~&amp;lt;\\?=~'),&lt;/span&gt;
&lt;span class="x"&gt;            array('&lt;/span&gt;&lt;span class="cp"&gt;&amp;lt;?php&lt;/span&gt;&lt;span class="nx"&gt;\\1&lt;/span&gt;&lt;span class="s1"&gt;', '&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;?&lt;/span&gt;&lt;span class="nx"&gt;php&lt;/span&gt; &lt;span class="k"&gt;echo&lt;/span&gt;&lt;span class="err"&gt;'&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
            &lt;span class="nv"&gt;$this&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="na"&gt;tpl&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="na"&gt;content&lt;/span&gt;
        &lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;include&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$this&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="na"&gt;tpl&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="na"&gt;file&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// include the file&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;První větev testuje, jestli jsou krátké značky vypnuty. Jestli ne, přejde plynule do &lt;code&gt;else&lt;/code&gt;, kde proběhne zpracování přes &lt;code&gt;include&lt;/code&gt; běžným způsobem. Pokud jsou vypnuty (tzn. server je tvrdohlavý a nepovolí je i přesto, že je v .htaccess a &lt;a href="http://cz.php.net/manual/en/function.ini-set.php"&gt;ini_set&lt;/a&gt; nastaveno aby zapnuty byly), dojde na slušné využití jedné z tabuizovaných funkcí v PHP, &lt;a href="http://cz2.php.net/manual/en/function.eval.php"&gt;eval&lt;/a&gt; :) . Už ten název…&lt;/p&gt;
&lt;p&gt;Jeden kouzelný řádek totiž způsobí, že se vezme text zdrojového souboru šablony, regulárním výrazem se v něm nahradí krátké značky za klasické dlouhé s &lt;code&gt;&amp;lt;?php&lt;/code&gt; apod. a předhodí se funkci &lt;code&gt;eval&lt;/code&gt;, která následně kód PHP vykoná. Ne, čistěji to nejde a přijde mi to jako oprávněné a elegantní využití této funkce, které řeší významný problém a stírá rozdíly v nastavení serverů. No jak by řekl Béda Trávníček: „A to se vyplatí!“&lt;/p&gt;
&lt;p&gt;Cachování samozřejmě zcela &lt;strong&gt;maže handicap většího potřebného výkonu&lt;/strong&gt;. Navíc, narazit na tak tvrdohlavý server se jistě jen tak nepoštěstí… Ale za tu jistotu to samozřejmě stojí. Teď už si můžeme pohodlně psát short open tags, velmi rychle, přehledně a efektivně s nimi kódovat šablony a nemusíme se ohlížet na nic a nikoho.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</content><category term="blog"></category><category term="joss"></category><category term="php"></category><category term="projekty"></category></entry><entry><title>Narodil se Joss</title><link href="https://honzajavorek.cz/blog/narodil-se-joss/" rel="alternate"></link><published>2008-06-13T02:13:00+02:00</published><updated>2008-06-13T02:13:00+02:00</updated><author><name>Honza Javorek</name></author><id>tag:honzajavorek.cz,2008-06-13:/blog/narodil-se-joss/</id><summary type="html">&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;p&gt;… a má 126 kilo :D . Ale teď vážně. Dnes vyšla &lt;strong&gt;první verze&lt;/strong&gt; &lt;a href="http://code.google.com/p/joss-cms/"&gt;Jossu&lt;/a&gt;, mého skromného &lt;strong&gt;open source frameworku&lt;/strong&gt;. Tedy zatím frameworku… Jednou bych z něj chtěl udělat lehké CMS.&lt;/p&gt;
&lt;p&gt;&lt;img alt="obrázek" class="right" src="https://honzajavorek.cz/images/64.jpg"&gt;Kód je napsán v objektovém PHP 5 a využívá nebo hodlá využívat co nejpoctivěji technologií XML, XHTML, CSS a JavaScript. Díky …&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</summary><content type="html">&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;p&gt;… a má 126 kilo :D . Ale teď vážně. Dnes vyšla &lt;strong&gt;první verze&lt;/strong&gt; &lt;a href="http://code.google.com/p/joss-cms/"&gt;Jossu&lt;/a&gt;, mého skromného &lt;strong&gt;open source frameworku&lt;/strong&gt;. Tedy zatím frameworku… Jednou bych z něj chtěl udělat lehké CMS.&lt;/p&gt;
&lt;p&gt;&lt;img alt="obrázek" class="right" src="https://honzajavorek.cz/images/64.jpg"&gt;Kód je napsán v objektovém PHP 5 a využívá nebo hodlá využívat co nejpoctivěji technologií XML, XHTML, CSS a JavaScript. Díky všem, kteří umožnili vznik Jossu vydáním svých skvělých projektů a myšlenek jako open source. Především to byli génius &lt;a href="http://www.davidgrudl.com"&gt;David Grudl&lt;/a&gt; a můj přítel &lt;a href="http://gringo.profitux.cz"&gt;Michal Wiglasz&lt;/a&gt;. Projekt těží z toho, že využívá kód formátovače &lt;a href="http://www.texy.info"&gt;Texy!&lt;/a&gt;, některých starších částí &lt;a href="http://nettephp.com/"&gt;frameworku Nette&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Vše potřebné včetně &lt;strong&gt;české dokumentace&lt;/strong&gt; najdete na &lt;a href="http://code.google.com/p/joss-cms/"&gt;stránkách projektu na Google Code&lt;/a&gt;. Měl bych připravit nějakou ochutnávku, výpis fičur nebo důvody, proč jsem to celé programoval, ale asi si to &lt;strong&gt;nechám na jindy&lt;/strong&gt;, protože teď mám spoustu jiné práce a ještě navrch k tomu mne udolává velká ospalost :) . Pokud jste zvědaví, nic vám nebrání stáhnout si archiv a hrát si… ;)&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</content><category term="blog"></category><category term="joss"></category><category term="php"></category><category term="projekty"></category></entry><entry><title>Tahák na syntaxi: PHP VS. Java</title><link href="https://honzajavorek.cz/blog/tahak-na-syntaxi-php-vs-java/" rel="alternate"></link><published>2008-03-30T18:05:00+02:00</published><updated>2008-03-30T18:05:00+02:00</updated><author><name>Honza Javorek</name></author><id>tag:honzajavorek.cz,2008-03-30:/blog/tahak-na-syntaxi-php-vs-java/</id><summary type="html">&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;p&gt;Ano, můžeme si otevřít knihy, můžeme zkoumat &lt;a href="http://en.wikipedia.org/wiki/PHP_syntax_and_semantics"&gt;PHP syntaxi&lt;/a&gt; nebo &lt;a href="http://en.wikipedia.org/wiki/Java_syntax"&gt;Java syntaxi&lt;/a&gt; na Wikipedii, číst si v referenčních webech… Ale to je zdlouhavé. Nabízím malý tahák pro stejně konvertované jako já – z PHP na Javu. Nesnažil jsem se o nic komplexního, Javu se z toho nenaučíte. Jde jen o výčet …&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</summary><content type="html">&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;p&gt;Ano, můžeme si otevřít knihy, můžeme zkoumat &lt;a href="http://en.wikipedia.org/wiki/PHP_syntax_and_semantics"&gt;PHP syntaxi&lt;/a&gt; nebo &lt;a href="http://en.wikipedia.org/wiki/Java_syntax"&gt;Java syntaxi&lt;/a&gt; na Wikipedii, číst si v referenčních webech… Ale to je zdlouhavé. Nabízím malý tahák pro stejně konvertované jako já – z PHP na Javu. Nesnažil jsem se o nic komplexního, Javu se z toho nenaučíte. Jde jen o výčet nejzákladnějších rozdílů v syntaxi, které se mohou plést, zvláště když jsou zažité…&lt;/p&gt;
&lt;div class="table-responsive"&gt;&lt;table class="table"&gt;
    &lt;tr&gt;
        &lt;th&gt;
            část syntaxe
        &lt;/th&gt;
        &lt;th&gt;
            PHP
        &lt;/th&gt;
        &lt;th&gt;
            Java
        &lt;/th&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;
            konstruktor
        &lt;/td&gt;
        &lt;td&gt;
            &lt;code&gt;__construct()&lt;/code&gt;, &lt;code&gt;Class()&lt;/code&gt;
        &lt;/td&gt;
        &lt;td&gt;
            &lt;code&gt;Class()&lt;/code&gt;
        &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;
            toString
        &lt;/td&gt;
        &lt;td&gt;
            &lt;code&gt;$object-&amp;gt;__toString()&lt;/code&gt;
        &lt;/td&gt;
        &lt;td&gt;
            &lt;code&gt;object.toString()&lt;/code&gt;
        &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;
            přístup ke statické proměnné/metodě
        &lt;/td&gt;
        &lt;td&gt;
            &lt;code&gt;Class::$name&lt;/code&gt;, &lt;code&gt;Class::name()&lt;/code&gt;
        &lt;/td&gt;
        &lt;td&gt;
            &lt;code&gt;Class.name&lt;/code&gt;, &lt;code&gt;Class.name()&lt;/code&gt;
        &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;
            přístup k vlastní statické proměnné/metodě
        &lt;/td&gt;
        &lt;td&gt;
            &lt;code&gt;self::$name&lt;/code&gt;, &lt;code&gt;self::name()&lt;/code&gt;
        &lt;/td&gt;
        &lt;td&gt;
            &lt;code&gt;name&lt;/code&gt;, &lt;code&gt;Class.name&lt;/code&gt;, &lt;code&gt;name()&lt;/code&gt;, &lt;code&gt;Class.name()&lt;/code&gt;
        &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;
            přístup k proměnné/metodě
        &lt;/td&gt;
        &lt;td&gt;
            &lt;code&gt;$object-&amp;gt;name&lt;/code&gt;, &lt;code&gt;$object-&amp;gt;name()&lt;/code&gt;
        &lt;/td&gt;
        &lt;td&gt;
            &lt;code&gt;object.name&lt;/code&gt;, &lt;code&gt;object.name()&lt;/code&gt;
        &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;
            přístup k vlastní proměnné/metodě
        &lt;/td&gt;
        &lt;td&gt;
            &lt;code&gt;$this-&amp;gt;name&lt;/code&gt;, &lt;code&gt;$this-&amp;gt;name()&lt;/code&gt;
        &lt;/td&gt;
        &lt;td&gt;
            &lt;code&gt;name&lt;/code&gt;, &lt;code&gt;this.name&lt;/code&gt;, &lt;code&gt;name()&lt;/code&gt;, &lt;code&gt;this.name()&lt;/code&gt;
        &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;
            (statická) konstanta
        &lt;/td&gt;
        &lt;td&gt;
            &lt;code&gt;const NAME&lt;/code&gt;
        &lt;/td&gt;
        &lt;td&gt;
            &lt;code&gt;static final type NAME&lt;/code&gt;
        &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;
            přístup ke konstantě
        &lt;/td&gt;
        &lt;td&gt;
            &lt;code&gt;self::NAME&lt;/code&gt;, &lt;code&gt;Class::NAME&lt;/code&gt;
        &lt;/td&gt;
        &lt;td&gt;
            &lt;code&gt;NAME&lt;/code&gt;, &lt;code&gt;Class.NAME&lt;/code&gt;
        &lt;/td&gt;
    &lt;/tr&gt;
&lt;/table&gt;

&lt;/div&gt;&lt;p&gt;Mimochodem, když jsem hledal něco takového jako tento článek na internetu, narazil jsem na &lt;a href="http://www.blueshoes.org/en/developer/php_cheat_sheet/"&gt;pěkný tahák pro PHP&lt;/a&gt;.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</content><category term="blog"></category><category term="java"></category><category term="php"></category></entry><entry><title>Jak uchránit textový soubor na serveru</title><link href="https://honzajavorek.cz/blog/jak-uchranit-textovy-soubor-na-serveru/" rel="alternate"></link><published>2008-02-03T12:30:00+01:00</published><updated>2008-02-03T12:30:00+01:00</updated><author><name>Honza Javorek</name></author><id>tag:honzajavorek.cz,2008-02-03:/blog/jak-uchranit-textovy-soubor-na-serveru/</id><summary type="html">&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;p&gt;Dnes jen krátce malý trik, jak uchránit soubory textového typu na serveru. Pokud si na &lt;code&gt;www.example.com&lt;/code&gt; nahraji nějaký &lt;code&gt;velikost-poprsi.txt&lt;/code&gt;, pak si jej logicky každý může přečíst na adrese &lt;code&gt;www.example.com/velikost-poprsi.txt&lt;/code&gt;. Někdy je to ale nežádoucí – např. pokud si uchováváme &lt;a href="http://interval.cz/clanky/konfiguracni-soubor-v-php-ve-formatu-xml/"&gt;konfigurační data aplikace v XML …&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</summary><content type="html">&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;p&gt;Dnes jen krátce malý trik, jak uchránit soubory textového typu na serveru. Pokud si na &lt;code&gt;www.example.com&lt;/code&gt; nahraji nějaký &lt;code&gt;velikost-poprsi.txt&lt;/code&gt;, pak si jej logicky každý může přečíst na adrese &lt;code&gt;www.example.com/velikost-poprsi.txt&lt;/code&gt;. Někdy je to ale nežádoucí – např. pokud si uchováváme &lt;a href="http://interval.cz/clanky/konfiguracni-soubor-v-php-ve-formatu-xml/"&gt;konfigurační data aplikace v XML&lt;/a&gt; nebo v textovém souboru (třeba &lt;a href="http://en.wikipedia.org/wiki/INI_file"&gt;INI soubor&lt;/a&gt;, zpracovávaný
pomocí &lt;a href="http://cz2.php.net/manual/en/function.parse-ini-file.php"&gt;parse_ini_file&lt;/a&gt;).&lt;/p&gt;
&lt;h2 id="nastaveni-serveru-pres-htaccess"&gt;Nastavení serveru přes .htaccess&lt;small class="permalink"&gt;&lt;a href="#nastaveni-serveru-pres-htaccess" title="Odkaz na tento nadpis"&gt;&lt;i class="bi bi-link-45deg"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/small&gt;&lt;/h2&gt;
&lt;p&gt;Konfigurační &lt;code&gt;velikost-poprsi.txt&lt;/code&gt; si například dáme do nějakého adresáře, do něhož umístíme i .htaccess soubor s obsahem&lt;/p&gt;
&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nb"&gt;deny&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;from&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;all&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Server pak &lt;strong&gt;všechny vnější požadavky&lt;/strong&gt; na soubory ve složce &lt;strong&gt;zamítne&lt;/strong&gt; (HTTP Error 403 – Forbidden).&lt;/p&gt;
&lt;h2 id="nemame-htaccess"&gt;Nemáme .htaccess&lt;small class="permalink"&gt;&lt;a href="#nemame-htaccess" title="Odkaz na tento nadpis"&gt;&lt;i class="bi bi-link-45deg"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/small&gt;&lt;/h2&gt;
&lt;p&gt;Co když nemáme nastavení přes .htaccess k dispozici? Použijeme malý trik, kdy soubor přejmenujeme na &lt;code&gt;velikost-poprsi.php&lt;/code&gt; a znemožníme přístup zvenčí okamžitým &lt;strong&gt;ukončením vykonávání skriptu&lt;/strong&gt; hned na začátku. Aplikace soubor načítá lokálně, takže jí to nijak nemusí vadit, pokud samozřejmě PHP kód řádně zakomentujeme.&lt;/p&gt;
&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;; &amp;lt;?php exit; ?&amp;gt; leve = A prave = C&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Pro XML by mělo fungovat něco podobného.&lt;/p&gt;
&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="cm"&gt;&amp;lt;!-- &amp;lt;?php exit; ?&amp;gt; --&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;conf&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;const&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;"leve"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;A&lt;span class="nt"&gt;&amp;lt;/const&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;const&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;"prave"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;C&lt;span class="nt"&gt;&amp;lt;/const&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;&amp;lt;/conf&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Samozřejmě, pokud použijete XML deklaraci, přijde vám na pomoc také &lt;a href="https://honzajavorek.cz/blog/xml-deklarace-a-php/"&gt;parse error&lt;/a&gt;. &lt;strong&gt;Nelze se však na něj spoléhat&lt;/strong&gt; a určitě je dobré vše pojistit oním PHP v komentáři, protože parse error může, ale nemusí nastat (nedojde ke kolizi, když má vaše PHP direktiva &lt;code&gt;short_open_tag&lt;/code&gt; hodnotu &lt;code&gt;0&lt;/code&gt;).&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</content><category term="blog"></category><category term="apache"></category><category term="php"></category><category term="projekty"></category></entry><entry><title>XML deklarace a PHP</title><link href="https://honzajavorek.cz/blog/xml-deklarace-a-php/" rel="alternate"></link><published>2007-12-20T01:42:00+01:00</published><updated>2007-12-20T01:42:00+01:00</updated><author><name>Honza Javorek</name></author><id>tag:honzajavorek.cz,2007-12-20:/blog/xml-deklarace-a-php/</id><summary type="html">&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;p&gt;Zase trochu o webdesignu. Připravte se na vzrušující objevování Ameriky, kola a podobných užitečných věcí. Čtenářky, které se nezabývají tvorbou webu, zřejmě zklamu, ale tak už to v životě chodí. Bavte se zatím třeba &lt;a href="http://gringo.profitux.cz/komixy/"&gt;tímhle&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="xml-deklarace"&gt;XML deklarace&lt;small class="permalink"&gt;&lt;a href="#xml-deklarace" title="Odkaz na tento nadpis"&gt;&lt;i class="bi bi-link-45deg"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/small&gt;&lt;/h2&gt;
&lt;p&gt;Pokud se člověk už definitivně nevzbouřil, neodklonil od XHTML a stále ho baví …&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</summary><content type="html">&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;p&gt;Zase trochu o webdesignu. Připravte se na vzrušující objevování Ameriky, kola a podobných užitečných věcí. Čtenářky, které se nezabývají tvorbou webu, zřejmě zklamu, ale tak už to v životě chodí. Bavte se zatím třeba &lt;a href="http://gringo.profitux.cz/komixy/"&gt;tímhle&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="xml-deklarace"&gt;XML deklarace&lt;small class="permalink"&gt;&lt;a href="#xml-deklarace" title="Odkaz na tento nadpis"&gt;&lt;i class="bi bi-link-45deg"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/small&gt;&lt;/h2&gt;
&lt;p&gt;Pokud se člověk už definitivně nevzbouřil, neodklonil od XHTML a stále ho baví psát striktně nevalidní jakožeXML dokumenty (více o těchto kravinách čtěte u &lt;a href="http://dero.name/weblog/xhtml-mime/"&gt;Dera&lt;/a&gt; nebo &lt;a href="http://html456.blogspot.com/"&gt;Martina Hassmana&lt;/a&gt;), jistě do nich také rád vkládá XML deklaraci. Je to první řádek v kódu, jenž hřímá „já jsem XML!“ a pokud stránka používá UTF-8, není povinný. Zakládám si na používání UTF-8, ale stejně jako mne náramně vzrušuje používat &lt;strong&gt;X&lt;/strong&gt;HTML, svědomí mi nedovolí XML deklaraci prostě vynechat. Holt zažité superstriktní pudy z dob evangelizace webu.&lt;/p&gt;
&lt;h2 id="php"&gt;PHP&lt;small class="permalink"&gt;&lt;a href="#php" title="Odkaz na tento nadpis"&gt;&lt;i class="bi bi-link-45deg"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/small&gt;&lt;/h2&gt;
&lt;p&gt;Bo su mimo jiné i PHP programátor, musel jsem po čase pokojného deklarování XML řešit jistý nedostatek symbiózy mezi jazykem a právě oním prvním řádkem dokumentu.&lt;/p&gt;
&lt;p&gt;Zápis&lt;/p&gt;
&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="cp"&gt;&amp;lt;?xml version="1.0" encoding="utf-8" ?&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;prostě není úplně ono, protože ty špičaté závorky a otazníčky PHP bere na sebe a server vám vrátí něco podivného, asi &lt;strong&gt;parse error&lt;/strong&gt;.&lt;/p&gt;
&lt;h2 id="reseni"&gt;Řešení&lt;small class="permalink"&gt;&lt;a href="#reseni" title="Odkaz na tento nadpis"&gt;&lt;i class="bi bi-link-45deg"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/small&gt;&lt;/h2&gt;
&lt;p&gt;Řešení je zřejmé…&lt;/p&gt;
&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="cp"&gt;&amp;lt;?php&lt;/span&gt; &lt;span class="k"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;"&amp;lt;?xml version=&lt;/span&gt;&lt;span class="se"&gt;\"&lt;/span&gt;&lt;span class="s2"&gt;1.0&lt;/span&gt;&lt;span class="se"&gt;\"&lt;/span&gt;&lt;span class="s2"&gt; encoding=&lt;/span&gt;&lt;span class="se"&gt;\"&lt;/span&gt;&lt;span class="s2"&gt;utf-8&lt;/span&gt;&lt;span class="se"&gt;\"&lt;/span&gt;&lt;span class="s2"&gt; ?&amp;gt;&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="cp"&gt;?&amp;gt;&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Nebo třeba&lt;/p&gt;
&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="cp"&gt;&amp;lt;?php&lt;/span&gt; &lt;span class="k"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;'&amp;lt;?xml version="1.0" encoding="utf-8" ?&amp;gt;'&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="cp"&gt;?&amp;gt;&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Jak je ale vidět, zřejmá řešení problémů nejsou ani hezká, ani elegantní. Předkládám proto jedno ne zcela zřejmé, ale geniální řešení, které je hezké, elegantní a navíc rychlé – nepotřebuje prakticky žádný výkon PHP.&lt;/p&gt;
&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="x"&gt;&amp;lt;&lt;/span&gt;&lt;span class="cp"&gt;&amp;lt;?php&lt;/span&gt; &lt;span class="cp"&gt;?&amp;gt;&lt;/span&gt;&lt;span class="x"&gt;?xml version="1.0" encoding="utf-8" ?&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;A je to! Že se tu zabývám blbostmi? No jistě že ano! Ale proč netrávit čas psaním a čtením článků o roztomilých maličkostech ;) . A že to šlo napsat v jedné větě? Ale no tak… Jako byste mě neznali! :D&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</content><category term="blog"></category><category term="php"></category><category term="projekty"></category><category term="xml"></category></entry></feed>